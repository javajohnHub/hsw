"use strict";(self.webpackChunkedwards_webdev_frontend=self.webpackChunkedwards_webdev_frontend||[]).push([[195],{7195:(k,c,a)=>{a.r(c),a.d(c,{LoginComponent:()=>P});var _=a(467),g=a(177),s=a(4341),m=a(5312),n=a(4438),u=a(2365),p=a(345);function f(i,l){1&i&&(n.j41(0,"span"),n.EFF(1,"Authenticating..."),n.k0s())}function h(i,l){1&i&&(n.j41(0,"span"),n.EFF(1,"Sign In to Admin Panel"),n.k0s())}function b(i,l){if(1&i&&(n.j41(0,"div",22)(1,"strong"),n.EFF(2,"Authentication Failed:"),n.k0s(),n.EFF(3),n.k0s()),2&i){const o=n.XpG(2);n.R7$(3),n.SpI(" ",o.errorMessage," ")}}function C(i,l){if(1&i){const o=n.RV6();n.j41(0,"div",4)(1,"div",5)(2,"h1",6),n.EFF(3,"Admin Access"),n.k0s(),n.j41(4,"p",7),n.EFF(5," Sign in to access administrative features and project management tools "),n.k0s()(),n.j41(6,"form",8),n.bIt("submit",function(t){n.eBV(o);const r=n.XpG();return n.Njj(r.onSubmit(t))}),n.j41(7,"div",9)(8,"label",10),n.EFF(9,"Username"),n.k0s(),n.j41(10,"input",11),n.mxI("ngModelChange",function(t){n.eBV(o);const r=n.XpG();return n.DH7(r.username,t)||(r.username=t),n.Njj(t)}),n.k0s()(),n.j41(11,"div",9)(12,"label",12),n.EFF(13,"Password"),n.k0s(),n.j41(14,"input",13),n.mxI("ngModelChange",function(t){n.eBV(o);const r=n.XpG();return n.DH7(r.password,t)||(r.password=t),n.Njj(t)}),n.k0s()(),n.j41(15,"div",14)(16,"button",15),n.DNE(17,f,2,0,"span",16)(18,h,2,0,"span",16),n.k0s(),n.j41(19,"button",17),n.bIt("click",function(){n.eBV(o);const t=n.XpG();return n.Njj(t.goToProjects())}),n.EFF(20," View Public Demo Instead "),n.k0s()()(),n.DNE(21,b,4,1,"div",18),n.j41(22,"div",19)(23,"h3",20),n.EFF(24,"Admin Features Include:"),n.k0s(),n.j41(25,"ul",21)(26,"li"),n.EFF(27,"Full project management access"),n.k0s(),n.j41(28,"li"),n.EFF(29,"Data editing and modification"),n.k0s(),n.j41(30,"li"),n.EFF(31,"Administrative controls"),n.k0s(),n.j41(32,"li"),n.EFF(33,"Advanced configuration options"),n.k0s()()()()}if(2&i){const o=n.XpG();n.R7$(10),n.R50("ngModel",o.username),n.Y8G("disabled",o.isLoading),n.R7$(4),n.R50("ngModel",o.password),n.Y8G("disabled",o.isLoading),n.R7$(2),n.Y8G("disabled",o.isLoading||!o.username.trim()||!o.password.trim()),n.R7$(),n.Y8G("ngIf",o.isLoading),n.R7$(),n.Y8G("ngIf",!o.isLoading),n.R7$(),n.Y8G("disabled",o.isLoading),n.R7$(2),n.Y8G("ngIf",o.errorMessage)}}function M(i,l){if(1&i){const o=n.RV6();n.j41(0,"div",23)(1,"div",24)(2,"div",25),n.EFF(3," \u{1f510} Admin Access Active "),n.k0s(),n.j41(4,"button",26),n.bIt("click",function(){n.eBV(o);const t=n.XpG();return n.Njj(t.logout())}),n.EFF(5," \u{1f6aa} Sign Out "),n.k0s()(),n.nrm(6,"iframe",27),n.k0s()}if(2&i){const o=n.XpG();n.R7$(6),n.Y8G("src",o.adminIframeUrl,n.f$h)}}let P=(()=>{class i{constructor(o,e,t){this.router=o,this.sanitizer=e,this.cdr=t,this.username="",this.password="",this.errorMessage="",this.isLoading=!1,this.iframeLoaded=!1,this.adminIframeUrl=null,this.iframeHost="http://localhost:4000"}onSubmit(o){var e=this;return(0,_.A)(function*(){if(o.preventDefault(),e.errorMessage="",e.isLoading=!0,e.cdr.markForCheck(),!e.username.trim()||!e.password.trim())return e.errorMessage="Please enter both username and password",e.isLoading=!1,void e.cdr.markForCheck();try{const t={username:e.username.trim(),password:e.password},r=yield fetch(`${m.c.apiUrl}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(t)});if(console.log("response",r),!r?.ok)return e.errorMessage=401===r.status?"Invalid username or password":404===r.status?"Authentication service not found. Please ensure the backend server is running on port 3000.":429===r.status?"Too many authentication attempts. Please try again later.":500===r.status?"Authentication service error. Please try again.":`Authentication failed (${r.status})`,void e.cdr.markForCheck();const d=yield r.json();console.log("body",d),d?.success?e.loadAdminPanel():(e.errorMessage=d.error||"Access denied. Admin privileges required.",e.cdr.markForCheck())}catch(t){console.error("Authentication error:",t),e.errorMessage=t instanceof TypeError&&t.message.includes("fetch")?"Cannot connect to authentication server. Please ensure the backend is running on port 3000.":"Connection error. Please check your network and try again.",e.cdr.markForCheck()}finally{e.isLoading=!1,e.cdr.markForCheck()}})()}loadAdminPanel(){try{this.adminIframeUrl=this.sanitizer.bypassSecurityTrustResourceUrl(`${this.iframeHost}?admin=1`),this.iframeLoaded=!0,this.cdr.markForCheck()}catch(o){console.error("Error loading admin panel:",o),this.errorMessage="Failed to load admin panel. Please try again.",this.cdr.markForCheck()}}logout(){this.iframeLoaded=!1,this.adminIframeUrl=null,this.username="",this.password="",this.errorMessage="",this.cdr.markForCheck()}goToProjects(){this.router.navigate(["/projects"])}static{this.\u0275fac=function(e){return new(e||i)(n.rXU(u.Ix),n.rXU(p.up),n.rXU(n.gRc))}}static{this.\u0275cmp=n.VBU({type:i,selectors:[["app-login"]],standalone:!0,features:[n.aNF],decls:4,vars:2,consts:[[1,"login"],[1,"login__container"],["class","login__card",4,"ngIf"],["class","login__admin-panel",4,"ngIf"],[1,"login__card"],[1,"login__header"],[1,"login__title"],[1,"login__subtitle"],[1,"login__form",3,"submit"],[1,"login__field"],["for","username",1,"login__label"],["id","username","name","username","type","text","placeholder","Enter your username","required","","autocomplete","username",1,"login__input",3,"ngModelChange","ngModel","disabled"],["for","password",1,"login__label"],["id","password","name","password","type","password","placeholder","Enter your password","required","","autocomplete","current-password",1,"login__input",3,"ngModelChange","ngModel","disabled"],[1,"login__actions"],["type","submit",1,"login__button","login__button--primary",3,"disabled"],[4,"ngIf"],["type","button",1,"login__button","login__button--secondary",3,"click","disabled"],["class","login__error",4,"ngIf"],[1,"login__info"],[1,"login__info-title"],[1,"login__info-list"],[1,"login__error"],[1,"login__admin-panel"],[1,"login__admin-controls"],[1,"login__status-indicator"],["title","Sign Out",1,"login__logout-button",3,"click"],["sandbox","allow-same-origin allow-scripts allow-forms allow-popups allow-modals allow-top-navigation","title","Admin Project Management Panel",1,"login__admin-iframe",3,"src"]],template:function(e,t){1&e&&(n.j41(0,"div",0)(1,"div",1),n.DNE(2,C,34,9,"div",2)(3,M,7,1,"div",3),n.k0s()()),2&e&&(n.R7$(2),n.Y8G("ngIf",!t.iframeLoaded),n.R7$(),n.Y8G("ngIf",t.iframeLoaded))},dependencies:[g.MD,g.bT,s.YN,s.qT,s.me,s.BC,s.cb,s.YS,s.vS,s.cV],styles:[".login[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);padding:2rem}.login__container[_ngcontent-%COMP%]{width:100%;max-width:450px;position:relative}.login__card[_ngcontent-%COMP%]{background:#fff;border-radius:1rem;box-shadow:0 10px 25px #0000001a;padding:2.5rem;border:1px solid #e1e5e9}.login__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.login__title[_ngcontent-%COMP%]{color:#007acc;font-size:2rem;font-weight:700;margin-bottom:.5rem;letter-spacing:-.025em}.login__subtitle[_ngcontent-%COMP%]{color:#6c757d;font-size:.95rem;margin:0;line-height:1.4}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;margin-bottom:2rem}.login__field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem}.login__label[_ngcontent-%COMP%]{color:#374151;font-weight:600;font-size:.875rem;letter-spacing:.025em}.login__input[_ngcontent-%COMP%]{padding:.875rem 1rem;border:2px solid #e5e7eb;border-radius:.5rem;font-size:1rem;transition:all .2s ease;background:#fafbfc}.login__input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007acc;background:#fff;box-shadow:0 0 0 3px #007acc1a}.login__input[_ngcontent-%COMP%]:disabled{background:#f3f4f6;cursor:not-allowed;opacity:.7}.login__actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;margin-top:.5rem}.login__button[_ngcontent-%COMP%]{padding:.875rem 1.5rem;border-radius:.5rem;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s ease;border:2px solid transparent;display:flex;align-items:center;justify-content:center;min-height:48px}.login__button--primary[_ngcontent-%COMP%]{background:#007acc;color:#fff;border-color:#007acc}.login__button--primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#005a9e;border-color:#005a9e;transform:translateY(-1px);box-shadow:0 4px 12px #007acc4d}.login__button--secondary[_ngcontent-%COMP%]{background:transparent;color:#6c757d;border-color:#dee2e6}.login__button--secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f8f9fa;border-color:#adb5bd;color:#495057}.login__button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;transform:none;box-shadow:none}.login__error[_ngcontent-%COMP%]{color:#dc3545;background:#f8d7da;border:1px solid #f5c6cb;border-radius:.5rem;padding:1rem;margin-bottom:1.5rem;font-size:.875rem;line-height:1.4}.login__info[_ngcontent-%COMP%]{border-top:1px solid #e9ecef;padding-top:1.5rem}.login__info-title[_ngcontent-%COMP%]{color:#495057;font-size:1rem;font-weight:600;margin-bottom:.75rem}.login__info-list[_ngcontent-%COMP%]{margin:0;padding-left:1.25rem;color:#6c757d;font-size:.875rem;line-height:1.5}.login__info-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.25rem}.login__admin-panel[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:9998}.login__admin-controls[_ngcontent-%COMP%]{position:fixed;top:1.25rem;left:1.25rem;z-index:10001;display:flex;gap:1rem;align-items:center}.login__status-indicator[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#28a745;color:#fff;border-radius:.5rem;font-weight:600;font-size:.875rem;box-shadow:0 4px 12px #0000004d}.login__logout-button[_ngcontent-%COMP%]{padding:.5rem 1rem;background:#dc3545;color:#fff;border:none;border-radius:.5rem;cursor:pointer;font-weight:600;font-size:.875rem;box-shadow:0 4px 12px #0000004d;transition:all .3s ease}.login__logout-button[_ngcontent-%COMP%]:hover{background:#c82333;transform:translateY(-2px)}.login__admin-iframe[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;border:none;z-index:10000;background:#fff}@media (max-width: 768px){.login[_ngcontent-%COMP%]{padding:1rem}.login__card[_ngcontent-%COMP%]{padding:2rem}.login__title[_ngcontent-%COMP%]{font-size:1.75rem}.login__admin-controls[_ngcontent-%COMP%]{top:1rem;left:1rem;flex-direction:column;align-items:flex-start;gap:.5rem}.login__status-indicator[_ngcontent-%COMP%], .login__logout-button[_ngcontent-%COMP%]{font-size:.8rem;padding:.5rem .75rem}}"],changeDetection:0})}}return i})()}}]);