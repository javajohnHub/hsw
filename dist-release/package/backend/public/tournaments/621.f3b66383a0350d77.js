"use strict";(self.webpackChunkretro_never_dies_client=self.webpackChunkretro_never_dies_client||[]).push([[621],{3621:(H,F,P)=>{P.r(F),P.d(F,{SelectMatchesComponent:()=>V});var O=P(2881),t=P(1360),E=P(7643),R=P(5297),T=P(671);const A=["wheelCanvas"];function j(l,M){if(1&l&&(t.j41(0,"div",19),t.EFF(1),t.k0s()),2&l){const n=t.XpG();t.R7$(),t.Lme(" Last match: ",n.lastMatch.player1," vs ",n.lastMatch.player2," ")}}function $(l,M){if(1&l&&(t.j41(0,"div",19),t.EFF(1),t.k0s()),2&l){const n=t.XpG();t.R7$(),t.SpI(" ",n.wheelFeedback," ")}}function z(l,M){1&l&&(t.j41(0,"div",19),t.EFF(1," Round robin matches generated and saved! "),t.k0s())}function D(l,M){1&l&&(t.j41(0,"span",28),t.EFF(1,"NEW!"),t.k0s())}function G(l,M){if(1&l&&(t.j41(0,"span",29),t.EFF(1),t.k0s()),2&l){const n=t.XpG(2).$implicit,a=t.XpG();t.R7$(),t.Lme(" ",a.getMatchupCount(n.player1,n.player2),"",a.getOrdinalSuffix(a.getMatchupCount(n.player1,n.player2))," ")}}function N(l,M){if(1&l&&(t.j41(0,"div",25),t.DNE(1,D,2,0,"span",26)(2,G,2,2,"span",27),t.k0s()),2&l){const n=t.XpG().$implicit,a=t.XpG();t.R7$(),t.Y8G("ngIf",1===a.getMatchupCount(n.player1,n.player2)),t.R7$(),t.Y8G("ngIf",a.getMatchupCount(n.player1,n.player2)>1)}}function U(l,M){if(1&l&&(t.j41(0,"div",20)(1,"div",21)(2,"span",22),t.EFF(3),t.k0s()(),t.j41(4,"div",23),t.EFF(5,"VS"),t.k0s(),t.j41(6,"div",21)(7,"span",22),t.EFF(8),t.k0s()(),t.DNE(9,N,3,2,"div",24),t.k0s()),2&l){const n=M.$implicit;t.R7$(3),t.JRh(n.player1||"TBD"),t.R7$(5),t.JRh(n.player2||"TBD"),t.R7$(),t.Y8G("ngIf",n.player1&&n.player2&&"Bye"!==n.player2)}}function L(l,M){if(1&l){const n=t.RV6();t.j41(0,"div",30),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.closeStatsModal())}),t.j41(1,"div",31),t.bIt("click",function(e){return t.eBV(n),t.Njj(e.stopPropagation())}),t.j41(2,"button",32),t.bIt("click",function(){t.eBV(n);const e=t.XpG();return t.Njj(e.closeStatsModal())}),t.EFF(3," \xd7 "),t.k0s(),t.j41(4,"div",33)(5,"h3"),t.EFF(6,"Matchup Statistics"),t.k0s(),t.j41(7,"pre",34),t.EFF(8),t.k0s()()()()}if(2&l){const n=t.XpG();t.R7$(8),t.JRh(n.statsMessage)}}let V=(()=>{class l{http;dataService;authService;cdr;ngZone;lastMatch=null;showGeneratedMsg=!1;wheelFeedback="";players=[];playersData=[];selectedPlayer=null;selectedOpponent=null;highlightTimeout=null;spinning=!1;angle=0;targetAngle=0;faviconImg=null;shouldAnimateStatic=!1;roundRobinMatches=[];currentWeek=1;maxWeeks=14;currentSeason=null;showStats=!1;showStatsModal=!1;statsMessage="";wheelCanvasRef;RAWG_API_KEY="your-api-key-here";RAWG_BASE_URL="/media";USE_REAL_API=!1;subscriptions=[];constructor(n,a,e,o,s){this.http=n,this.dataService=a,this.authService=e,this.cdr=o,this.ngZone=s}ngOnInit(){this.authService.isAdminMode||this.authService.redirectToPublic()}ngAfterViewInit(){this.loadFavicon(),this.loadActiveWeek(),this.subscriptions.push(this.dataService.players$.subscribe(n=>{this.playersData=n,this.players=n.map(a=>a.name),this.redrawWheelForCurrentWeek(),this.cdr.markForCheck()})),this.subscriptions.push(this.dataService.matches$.subscribe(n=>{this.roundRobinMatches=n,this.redrawWheelForCurrentWeek(),this.cdr.markForCheck()})),this.subscriptions.push(this.dataService.seasons$.subscribe(n=>{this.currentSeason=n.find(a=>"active"===a.status)||null,this.currentSeason&&(this.maxWeeks=this.currentSeason.weeks),this.cdr.markForCheck()})),this.dataService.loadAllData().subscribe(),this.animateStatic(),setTimeout(()=>this.resizeWheelCanvas(),50)}onWindowResize(){this.resizeWheelCanvas()}resizeWheelCanvas(){try{const n=this.wheelCanvasRef?.nativeElement;if(!n)return;const a=window.devicePixelRatio||1,e=n.parentElement&&n.parentElement.getBoundingClientRect()||n.getBoundingClientRect(),o=Math.max(200,Math.floor(window.innerWidth-40)),s=Math.max(200,Math.min(Math.floor(e.width),o)),i=Math.max(200,Math.min(Math.floor(e.height||e.width),o));n.width=Math.floor(s*a),n.height=Math.floor(i*a),n.style.width=`${s}px`,n.style.height=`${i}px`;const r=n.getContext("2d");r&&r.setTransform(a,0,0,a,0,0),this.redrawWheelForCurrentWeek()}catch(n){console.warn("resizeWheelCanvas error",n)}}animateStatic(){let n=-1,a=-1;const e=()=>{const o=this.getWheelPlayers(),s=o.length,i=this.isWeekSelectionComplete(this.currentWeek);s!==n||this.currentWeek!==a?(n=s,a=this.currentWeek,this.drawWheel(o)):0===s&&i&&this.drawWheel(o),requestAnimationFrame(e)};e()}ngOnDestroy(){this.subscriptions.forEach(n=>n.unsubscribe())}loadFavicon(){this.faviconImg=new Image,this.faviconImg.onload=()=>{this.redrawWheelForCurrentWeek()},this.faviconImg.src="favicon.ico"}truncateText(n,a,e,o=9){const s="...";if(a.length>o)return a.slice(0,o)+s;if(n.measureText(a).width<=e)return a;let i=a;for(;i.length>0;){const r=i+s;if(n.measureText(r).width<=e)return r;i=i.slice(0,-1)}return s}drawStaticEffect(n,a,e,o,s){const i=n.createImageData(o,s),r=i.data;for(let c=0;c<r.length;c+=4){const h=255*Math.random();r[c]=h,r[c+1]=h,r[c+2]=h,r[c+3]=255}n.putImageData(i,a,e)}drawWheel(n){const a=this.wheelCanvasRef&&this.wheelCanvasRef.nativeElement||document.querySelector("canvas.wheel-canvas");if(!a)return;const e=a.getContext("2d");if(!e)return;const o=a.getBoundingClientRect(),s=Math.max(0,o.width),i=s/2,r=Math.max(10,i-10);e.clearRect(0,0,s,s);const c=n||this.getWheelPlayers(),h=c.length,g=this.isWeekSelectionComplete(this.currentWeek);if(0===h&&g){if(e.beginPath(),e.arc(i,i,r,0,2*Math.PI),e.fillStyle="#181a1b",e.fill(),e.strokeStyle="#53fc19",e.lineWidth=3,e.stroke(),this.faviconImg&&this.faviconImg.complete){e.save(),e.translate(i,i),e.rotate(this.angle);const p=2*(r-20),k=p/2;e.drawImage(this.faviconImg,-k,-k,p,p),e.restore()}return}if(0===h){e.beginPath(),e.arc(i,i,r,0,2*Math.PI),e.fillStyle="#181a1b",e.fill(),e.strokeStyle="#53fc19",e.lineWidth=3,e.stroke(),e.textAlign="center",e.font="bold 1.2rem Orbitron, Arial",e.fillStyle="#53fc19",e.fillText("Loading",i,i-10),e.fillText("Players...",i,i+15);const p=40;return e.save(),e.translate(i,i+50),e.rotate(this.angle),e.beginPath(),e.arc(0,0,p,0,2*Math.PI),e.fillStyle="#fff",e.fill(),e.strokeStyle="#53fc19",e.lineWidth=3,e.stroke(),this.faviconImg&&this.faviconImg.complete&&e.drawImage(this.faviconImg,-25,-25,50,50),void e.restore()}const b=2*Math.PI/h;let m=this.selectedPlayer?c.indexOf(this.selectedPlayer):-1,x=this.selectedOpponent?c.indexOf(this.selectedOpponent):-1;for(let p=0;p<h;p++){const k=this.angle+p*b,v=k+b;if(e.save(),e.beginPath(),e.moveTo(i,i),e.arc(i,i,r,k,v),e.closePath(),p===m||p===x){e.fillStyle="#ff2d2d",e.globalAlpha=.95,e.shadowColor="#ff2d2d",e.shadowBlur=16,e.fill(),e.globalAlpha=1,e.strokeStyle="#fff",e.lineWidth=8,e.stroke();let d=1.15;if(this.selectedPlayer||this.selectedOpponent){const y=2e3,S=performance.now()%y/y*Math.PI*2;d=1.15+.08*Math.sin(S)}e.save(),e.translate(i,i),e.rotate(k+b/2),e.scale(d,d),e.restore()}else e.fillStyle=p%2==0?"#53fc19":"#181a1b",e.globalAlpha=.85,e.fill(),e.globalAlpha=1,e.strokeStyle="#fff",e.lineWidth=2,e.stroke();e.save(),e.translate(i,i),e.rotate(k+b/2),e.textAlign="right",e.font="bold 0.85rem Orbitron, Arial",e.fillStyle="#fff",e.shadowColor=p===m||p===x?"#000":"#181a1b",e.shadowBlur=p===m||p===x?12:4;const u=c[p],f=r-25;if(u.length>9){const d=u.slice(0,9),_=u.slice(9),y=this.truncateText(e,d,f),S=this.truncateText(e,_,f);e.fillText(y,r-18,-4),e.fillText(S,r-18,12)}else{const d=this.truncateText(e,u,f);e.fillText(d,r-18,4)}e.restore(),e.restore()}e.save(),e.translate(i,i),e.rotate(this.angle),e.beginPath(),e.arc(0,0,40,0,2*Math.PI),e.fillStyle="#fff",e.fill(),e.strokeStyle="#53fc19",e.lineWidth=3,e.stroke(),this.faviconImg&&this.faviconImg.complete&&e.drawImage(this.faviconImg,-25,-25,50,50),e.restore(),e.save(),e.translate(i,20),e.beginPath(),e.moveTo(0,0),e.lineTo(-15,-25),e.lineTo(-5,-15),e.lineTo(5,-15),e.lineTo(15,-25),e.lineTo(0,0),e.closePath(),e.fillStyle="#fff",e.strokeStyle="#181a1b",e.lineWidth=2,e.shadowColor="#53fc19",e.shadowBlur=8,e.fill(),e.stroke(),e.restore(),this.spinning&&1===Math.floor(performance.now()/80%2)&&(e.save(),e.translate(i,18),e.rotate(Math.PI),e.beginPath(),e.arc(0,-24,8,0,2*Math.PI),e.fillStyle="#53fc19",e.globalAlpha=.7,e.fill(),e.restore())}spinWheelAndSave(){const n=this.getWheelPlayers();if(this.spinning)return;if(n.length<2)return void(this.wheelFeedback="All players matched for this week.");this.spinning=!0,this.wheelFeedback="Spinning the wheel...";const a=Math.floor(Math.random()*n.length),e=2*Math.PI/n.length,o=3*Math.PI/2-(e*a+e/2);let s=this.angle,i=performance.now(),c=6*Math.PI+o;const h=3e3,g=b=>{let m=b-i;if(m>h&&(m=h),this.angle=s+m/h*(c-s),this.drawWheel(n),m<h)requestAnimationFrame(g);else{this.angle=c%(2*Math.PI),this.drawWheel(n),this.selectedPlayer=n[a],this.spinning=!1;let x=null;if("Bye"===this.selectedPlayer){const v=n.filter(u=>"Bye"!==u);x=null,this.selectedOpponent=null,this.wheelFeedback=`Selected: ${this.getFairByeFromAvailable(v)} gets bye week!`}else{const v=n.filter(w=>w!==this.selectedPlayer&&"Bye"!==w);let u=v.filter(w=>this.canPairPlayers(this.selectedPlayer,w));0===u.length&&(u=v);const f=this.getUnplayedOpponents(this.selectedPlayer,u);x=f.length>0?f[Math.floor(Math.random()*f.length)]:u.length>0?u.reduce((w,W)=>{const I=this.getMatchupCount(this.selectedPlayer,w),B=this.getMatchupCount(this.selectedPlayer,W);if(B===I){const X=this.getConsecutiveWeeksPlayed(this.selectedPlayer,w);return this.getConsecutiveWeeksPlayed(this.selectedPlayer,W)<X?W:w}return B<I?W:w}):"TBD",this.selectedOpponent=x;const d=this.getMatchupCount(this.selectedPlayer,x),y=0===d?" (NEW MATCHUP!)":` (${d+1}${this.getOrdinalSuffix(d+1)} time)`;this.wheelFeedback=`Selected: ${this.selectedPlayer} vs ${x}${y}${v.length>0&&0===u.length?" (fairness override)":""}. Saving...`}const C=performance.now(),p=2e3,k=()=>{const u=performance.now()-C;if(this.drawWheel(n),u<p)requestAnimationFrame(k);else{if("Bye"===this.selectedPlayer){const f=n.filter(y=>"Bye"!==y),d=this.getFairByeFromAvailable(f),_={week:this.currentWeek,player1:d,player2:"Bye",status:"scheduled",played:!1,season:this.currentSeason?.id||void 0};this.ngZone.run(()=>{this.lastMatch=_,this.cdr.markForCheck(),this.dataService.addMatch(_).subscribe({next:()=>{this.wheelFeedback=`Bye week saved for ${d}.`,this.cdr.markForCheck(),setTimeout(()=>{this.wheelFeedback="",this.cdr.markForCheck()},2500)},error:()=>{this.wheelFeedback="Error saving bye week to server.",this.cdr.markForCheck()}})})}else{const f={week:this.currentWeek,player1:this.selectedPlayer,player2:this.selectedOpponent,status:"scheduled",played:!1,season:this.currentSeason?.id||void 0};this.ngZone.run(()=>{this.lastMatch=f,this.cdr.markForCheck()});const d=this.getMatchupCount(this.selectedPlayer,this.selectedOpponent),y=0===d?" (NEW MATCHUP!)":` (${d+1}${this.getOrdinalSuffix(d+1)} time)`;this.wheelFeedback=`Selected: ${f.player1} vs ${f.player2}${y}. Saving...`,this.dataService.addMatch(f).subscribe({next:()=>{this.wheelFeedback=`Match saved: ${f.player1} vs ${f.player2}${y}`,this.cdr.markForCheck(),setTimeout(()=>{this.wheelFeedback="",this.cdr.markForCheck()},2500)},error:()=>{this.wheelFeedback="Error saving match to server.",this.cdr.markForCheck()}})}this.removeSelectedFromWheel()}};k()}};requestAnimationFrame(g)}generateWeeklyMatches(){const n=this.players.filter(s=>"Bye Week"!==s),a=[];if(n.length%2==0){const s=this.generateOptimalMatchups(n);for(const i of s)a.push({week:this.currentWeek,player1:i[0],player2:i[1],status:"scheduled",played:!1,season:this.currentSeason?.id||void 0})}else{const s=this.getPlayerForBye(),i=n.filter(c=>c!==s),r=this.generateOptimalMatchups(i);a.push({week:this.currentWeek,player1:s,player2:"Bye",status:"scheduled",played:!1,season:this.currentSeason?.id||void 0});for(const c of r)a.push({week:this.currentWeek,player1:c[0],player2:c[1],status:"scheduled",played:!1,season:this.currentSeason?.id||void 0})}const o=[...this.roundRobinMatches.filter(s=>s.week!==this.currentWeek),...a];this.dataService.saveMatches(o).subscribe({next:()=>{this.showGeneratedMsg=!0,setTimeout(()=>{this.showGeneratedMsg=!1},2500)},error:()=>{this.showGeneratedMsg=!0,setTimeout(()=>{this.showGeneratedMsg=!1},2500)}})}getPlayerForBye(){const n=this.players.filter(s=>"Bye Week"!==s),a={};n.forEach(s=>{a[s]=0}),this.roundRobinMatches.forEach(s=>{"Bye"===s.player2&&"Bye"!==s.player1&&(a[s.player1]=(a[s.player1]||0)+1)});const e=Math.min(...Object.values(a)),o=n.filter(s=>a[s]===e);return o[Math.floor(Math.random()*o.length)]}getPlayerMatchHistory(n){return this.roundRobinMatches.filter(a=>(a.player1===n||a.player2===n)&&"Bye"!==a.player2).map(a=>a.player1===n?a.player2:a.player1)}getUnplayedOpponents(n,a){const e=this.getPlayerMatchHistory(n);return a.filter(o=>o!==n&&!e.includes(o))}getMatchupCount(n,a){return this.roundRobinMatches.filter(e=>e.player1===n&&e.player2===a||e.player1===a&&e.player2===n).length}getConsecutiveWeeksPlayed(n,a){let e=0;for(let o=this.currentWeek-1;o>=1&&this.roundRobinMatches.some(i=>i.week===o&&(i.player1===n&&i.player2===a||i.player1===a&&i.player2===n));o--)if(e++,e>=2)return e;return e}canPairPlayers(n,a){return this.getConsecutiveWeeksPlayed(n,a)<2}generateOptimalMatchups(n){const a=[],e=[...n];for(e.sort((o,s)=>this.getPlayerMatchHistory(o).length-this.getPlayerMatchHistory(s).length);e.length>=2;){const o=e.shift();let s=e.filter(g=>this.canPairPlayers(o,g));0===s.length&&(s=[...e]);const i=this.getUnplayedOpponents(o,s),c=(i.length>0?i:s).map(g=>({opp:g,score:10*this.getMatchupCount(o,g)+25*this.getConsecutiveWeeksPlayed(o,g)+2*this.getPlayerMatchHistory(g).length})).sort((g,b)=>g.score-b.score)[0].opp,h=e.indexOf(c);h>=0&&e.splice(h,1),a.push([o,c])}return a}getOrdinalSuffix(n){const a=["th","st","nd","rd"],e=n%100;return a[(e-20)%10]||a[e]||a[0]}openStatsModal(){const n=this.players.filter(s=>"Bye Week"!==s);let a="=== MATCHUP STATISTICS ===\n\n";n.forEach(s=>{const i=this.getPlayerMatchHistory(s),r=[...new Set(i)],c=this.getUnplayedOpponents(s,n);a+=`${s}:\n`,a+=`  Total matches: ${i.length}\n`,a+=`  Unique opponents: ${r.length}/${n.length-1}\n`,r.length>0&&(a+="  Played against:\n",r.forEach(h=>{const g=this.getMatchupCount(s,h);a+=`    ${h}: ${g} time${g>1?"s":""}\n`})),c.length>0&&(a+=`  Not yet played: ${c.join(", ")}\n`),a+="\n"});const e=n.length*(n.length-1)/2,o=new Set(this.roundRobinMatches.filter(s=>"Bye"!==s.player2).map(s=>[s.player1,s.player2].sort().join(" vs "))).size;a+="=== FAIRNESS METRICS ===\n",a+=`Unique matchups played: ${o}/${e}\n`,a+=`Fairness: ${Math.round(o/e*100)}%\n`,this.statsMessage=a,this.showStatsModal=!0}closeStatsModal(){this.showStatsModal=!1,this.statsMessage=""}getMatchesForWeek(n){return this.roundRobinMatches.filter(a=>a.week===n)}getMatchupGrid(){const n=this.getMatchesForWeek(this.currentWeek),a=this.players.filter(s=>"Bye Week"!==s),e=Math.floor(a.length/2),o=[];for(n.forEach(s=>{o.push({player1:s.player1,player2:s.player2})});o.length<e;)o.push({player1:"",player2:""});return o}saveMatches(){localStorage.setItem("rnd_roundRobinMatches",JSON.stringify(this.roundRobinMatches))}isWeekSelectionComplete(n){const a=this.players.filter(i=>"Bye Week"!==i);if(0===a.length)return!1;const e=this.getMatchesForWeek(n),o=Math.floor(a.length/2);return e.length>=(a.length%2==1?o+1:o)}getWheelPlayers(){const a=this.getMatchesForWeek(this.currentWeek).reduce(function(s,i){return s.concat([i.player1,i.player2])},[]),e=this.players.filter(s=>!a.includes(s)&&"Bye Week"!==s),o=[...e];if(o.length%2==1){const s=this.players.filter(r=>"Bye Week"!==r);this.getPlayersNeedingBye(s,e),o.push("Bye")}return o}getPlayersNeedingBye(n,a){const e={};n.forEach(i=>{e[i]=0}),this.roundRobinMatches.forEach(i=>{"Bye"===i.player2&&"Bye"!==i.player1&&(e[i.player1]=(e[i.player1]||0)+1)});const o=a.map(i=>e[i]||0);if(0===o.length)return[];const s=Math.min(...o);return a.filter(i=>e[i]===s)}getFairByeFromAvailable(n){const a={};n.forEach(s=>{a[s]=0}),this.roundRobinMatches.forEach(s=>{"Bye"===s.player2&&"Bye"!==s.player1&&n.includes(s.player1)&&(a[s.player1]=(a[s.player1]||0)+1)});const e=Math.min(...Object.values(a)),o=n.filter(s=>a[s]===e);return o[Math.floor(Math.random()*o.length)]}prevWeek(){this.currentWeek=this.currentWeek>1?this.currentWeek-1:1,this.selectedPlayer=null,this.shouldAnimateStatic=!1,this.wheelFeedback="",this.redrawWheelForCurrentWeek()}nextWeek(){this.currentWeek=this.currentWeek<this.maxWeeks?this.currentWeek+1:this.maxWeeks,this.selectedPlayer=null,this.shouldAnimateStatic=!1,this.wheelFeedback="",this.redrawWheelForCurrentWeek()}redrawWheelForCurrentWeek(){this.selectedPlayer=null,this.shouldAnimateStatic=!1,this.wheelFeedback="";const n=this.getWheelPlayers();this.drawWheel(n)}loadActiveWeek(){const n=localStorage.getItem("currentActiveWeek");if(n){const a=parseInt(n);a>=1&&a<=this.maxWeeks&&(this.currentWeek=a,this.selectedPlayer=null,this.shouldAnimateStatic=!1,this.redrawWheelForCurrentWeek())}window.addEventListener("storage",a=>{if("currentActiveWeek"===a.key&&a.newValue){const e=parseInt(a.newValue);e>=1&&e<=this.maxWeeks&&(this.currentWeek=e,this.selectedPlayer=null,this.shouldAnimateStatic=!1,this.wheelFeedback="",this.redrawWheelForCurrentWeek())}})}removeSelectedFromWheel(){Array.isArray(this.players)&&(this.selectedPlayer&&(this.players=this.players.filter(n=>n!==this.selectedPlayer)),this.selectedOpponent&&(this.players=this.players.filter(n=>n!==this.selectedOpponent))),this.selectedPlayer=null,this.selectedOpponent=null,this.drawWheel(this.players)}static \u0275fac=function(a){return new(a||l)(t.rXU(E.Qq),t.rXU(R.u),t.rXU(T.u),t.rXU(t.gRc),t.rXU(t.SKi))};static \u0275cmp=t.VBU({type:l,selectors:[["app-select-matches"]],viewQuery:function(a,e){if(1&a&&t.GBs(A,5),2&a){let o;t.mGM(o=t.lsd())&&(e.wheelCanvasRef=o.first)}},hostBindings:function(a,e){1&a&&t.bIt("resize",function(){return e.onWindowResize()},!1,t.tSv)},decls:31,vars:9,consts:[["wheelCanvas",""],[1,"wheel-bg"],[1,"wheel-title"],[1,"wheel-main-layout"],[1,"wheel-left-section"],[1,"wheel-container"],["width","350","height","350",1,"wheel-canvas",3,"click"],[1,"wheel-btn-row"],[1,"wheel-btn",3,"click"],[1,"wheel-right-section"],[1,"selected-player","animate-pop"],[1,"selected-name"],["class","match-feedback",4,"ngIf"],[1,"matchups-panel"],[1,"matchup-grid"],["class","matchup-card",4,"ngFor","ngForOf"],[1,"week-controls"],[3,"click"],["class","stats-modal-backdrop",3,"click",4,"ngIf"],[1,"match-feedback"],[1,"matchup-card"],[1,"player-slot"],[1,"player-name"],[1,"vs-divider"],["class","matchup-info",4,"ngIf"],[1,"matchup-info"],["class","new-matchup",4,"ngIf"],["class","repeat-matchup",4,"ngIf"],[1,"new-matchup"],[1,"repeat-matchup"],[1,"stats-modal-backdrop",3,"click"],[1,"stats-modal",3,"click"],["aria-label","Close",1,"close-modal",3,"click"],[1,"stats-modal-content"],[1,"stats-pre"]],template:function(a,e){if(1&a){const o=t.RV6();t.j41(0,"div",1)(1,"h1",2),t.EFF(2),t.k0s(),t.j41(3,"div",3)(4,"div",4)(5,"div",5)(6,"canvas",6,0),t.bIt("click",function(){return t.eBV(o),t.Njj(e.spinWheelAndSave())}),t.k0s()(),t.j41(8,"div",7)(9,"button",8),t.bIt("click",function(){return t.eBV(o),t.Njj(e.openStatsModal())}),t.EFF(10," View Matchup Stats "),t.k0s()()(),t.j41(11,"div",9)(12,"div",10)(13,"h2"),t.EFF(14,"Selected Player:"),t.k0s(),t.j41(15,"div",11),t.EFF(16),t.k0s(),t.DNE(17,j,2,2,"div",12)(18,$,2,1,"div",12),t.k0s(),t.DNE(19,z,2,0,"div",12),t.j41(20,"div",13)(21,"h2"),t.EFF(22),t.k0s(),t.j41(23,"div",14),t.DNE(24,U,10,3,"div",15),t.k0s()()()(),t.j41(25,"div",16)(26,"button",17),t.bIt("click",function(){return t.eBV(o),t.Njj(e.prevWeek())}),t.EFF(27,"Previous Week"),t.k0s(),t.j41(28,"button",17),t.bIt("click",function(){return t.eBV(o),t.Njj(e.nextWeek())}),t.EFF(29,"Next Week"),t.k0s()()(),t.DNE(30,L,9,1,"div",18)}2&a&&(t.R7$(2),t.Lme(" Current Week: ",e.currentWeek," / ",e.maxWeeks," "),t.R7$(14),t.SpI(" ",e.selectedPlayer||"No selection yet"," "),t.R7$(),t.Y8G("ngIf",e.lastMatch),t.R7$(),t.Y8G("ngIf",e.wheelFeedback),t.R7$(),t.Y8G("ngIf",e.showGeneratedMsg),t.R7$(3),t.SpI("Week ",e.currentWeek," Matchup Grid"),t.R7$(2),t.Y8G("ngForOf",e.getMatchupGrid()),t.R7$(6),t.Y8G("ngIf",e.showStatsModal))},dependencies:[O.MD,O.Sq,O.bT],styles:[".wheel-bg[_ngcontent-%COMP%]{min-height:100vh;background:#181a1b;font-family:Orbitron,Arial Black,Arial,sans-serif;color:#fff;padding:16px}.matchup-grid[_ngcontent-%COMP%]{display:grid!important;grid-template-columns:1fr!important;gap:12px!important}.matchup-card[_ngcontent-%COMP%]{padding:12px!important}.wheel-left-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;flex:0 0 380px}.wheel-right-section[_ngcontent-%COMP%]{flex:1;min-width:350px}.tv-displays[_ngcontent-%COMP%]{display:flex;gap:20px;margin-top:20px;justify-content:center}.tv-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.tv-screen[_ngcontent-%COMP%]{position:relative;width:150px;height:120px}.tv-frame[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;position:absolute;top:0;left:0;z-index:2}.tv-content[_ngcontent-%COMP%]{position:absolute;top:15%;left:15%;width:70%;height:70%;z-index:1;border-radius:8px;overflow:hidden;background:#000;display:flex;align-items:center;justify-content:center}.tv-game-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.tv-placeholder[_ngcontent-%COMP%]{color:#ddd;font-size:.8rem;text-align:center;padding:8px;background:#181a1bcc}.tv-static[_ngcontent-%COMP%]{width:100%;height:100%;background:radial-gradient(circle at 20% 50%,white 2px,transparent 3px),radial-gradient(circle at 75% 25%,white 3px,transparent 4px),radial-gradient(circle at 90% 90%,white 1px,transparent 2px),radial-gradient(circle at 40% 70%,white 2px,transparent 3px),radial-gradient(circle at 65% 15%,white 3px,transparent 4px),radial-gradient(circle at 10% 90%,white 2px,transparent 3px),radial-gradient(circle at 30% 30%,white 1px,transparent 2px),radial-gradient(circle at 80% 60%,white 2px,transparent 3px);background-size:40px 40px,60px 60px,30px 30px,50px 50px,45px 45px,35px 35px,25px 25px,55px 55px;animation:_ngcontent-%COMP%_staticNoise .5s steps(8) infinite;opacity:.8}@keyframes _ngcontent-%COMP%_staticNoise{0%,to{background-position:0 0,20px 10px,40px 30px,10px 50px,30px 20px,50px 40px,15px 15px,35px 25px}12.5%{background-position:5px 5px,25px 15px,45px 35px,15px 55px,35px 25px,55px 45px,20px 20px,40px 30px}25%{background-position:10px 10px,30px 20px,50px 40px,20px 60px,40px 30px,60px 50px,25px 25px,45px 35px}37.5%{background-position:15px 15px,35px 25px,55px 45px,25px 65px,45px 35px,65px 55px,30px 30px,50px 40px}50%{background-position:20px 20px,40px 30px,60px 50px,30px 70px,50px 40px,70px 60px,35px 35px,55px 45px}62.5%{background-position:25px 25px,45px 35px,65px 55px,35px 75px,55px 45px,75px 65px,40px 40px,60px 50px}75%{background-position:30px 30px,50px 40px,70px 60px,40px 80px,60px 50px,80px 70px,45px 45px,65px 55px}87.5%{background-position:35px 35px,55px 45px,75px 65px,45px 85px,65px 55px,85px 75px,50px 50px,70px 60px}}.tv-label[_ngcontent-%COMP%]{margin-top:8px;font-size:.9rem;color:#ddd;text-align:center}.wheel-banner[_ngcontent-%COMP%]{margin-bottom:24px}.wheel-img[_ngcontent-%COMP%]{max-width:400px;height:auto;border-radius:12px;box-shadow:0 0 24px #53fc1980}.wheel-container[_ngcontent-%COMP%]{width:350px;height:350px;margin-bottom:16px;position:relative;display:flex;justify-content:center;align-items:center}.wheel-canvas[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 0 24px #53fc19,0 0 32px #181a1b inset;background:#fff}.wheel-btn-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}.wheel-btn[_ngcontent-%COMP%]{display:block;margin:18px auto;background:#53fc19;color:#181a1b;border:none;border-radius:8px;padding:10px 32px;font-size:1.2rem;font-weight:700;box-shadow:0 0 8px #53fc19;cursor:pointer;transition:background .2s,color .2s}.wheel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background:#fff;color:#ddd}.tv-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:12px;margin-bottom:16px}.tv-btn[_ngcontent-%COMP%]{background:#181a1b;color:#ddd;border:2px solid #53fc19;border-radius:8px;padding:8px 16px;font-size:.9rem;font-weight:700;cursor:pointer;transition:all .3s ease}.tv-btn[_ngcontent-%COMP%]:hover{background:#53fc19;color:#181a1b;transform:scale(1.05)}.selected-player[_ngcontent-%COMP%]{margin-bottom:16px;padding:16px;background:#53fc191a;border-radius:12px;border:2px solid #53fc19;box-shadow:0 0 16px #53fc194d}.selected-player[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 8px;color:#ddd;font-size:1.2rem}.selected-name[_ngcontent-%COMP%]{color:#fff;font-size:1.5rem;font-weight:700;margin-bottom:6px}.match-feedback[_ngcontent-%COMP%]{margin-top:12px;padding:8px 12px;background:#ffffff1a;border-radius:6px;font-size:.9rem;color:#ddd}.matchups-panel[_ngcontent-%COMP%]{background:#181a1bcc;border-radius:12px;padding:16px;margin-bottom:16px;border:1px solid #53fc19;box-shadow:0 0 12px #53fc1933}.matchups-panel[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#ddd;font-size:1.1rem;margin:0 0 12px;text-align:center}.selected-name[_ngcontent-%COMP%]{font-size:2rem;color:#ddd;font-weight:700;text-shadow:0 0 8px #181a1b;margin-top:8px;letter-spacing:2px}@keyframes _ngcontent-%COMP%_popIn{0%{transform:scale(.7) rotate(-10deg);opacity:0}80%{transform:scale(1.1) rotate(3deg);opacity:1}to{transform:scale(1) rotate(0)}}.matchups-panel[_ngcontent-%COMP%]{background:#181a1bf2;border-radius:18px;box-shadow:0 0 24px #53fc19,0 0 32px #181a1b inset;padding:24px 32px;min-width:400px;max-width:900px;margin:32px auto 0;color:#fff}.matchup-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:16px;margin-bottom:24px;padding:0 20px;justify-items:center}@media (max-width: 900px){.matchup-grid[_ngcontent-%COMP%]{grid-template-columns:1fr;padding:0 10px}}.matchup-card[_ngcontent-%COMP%]{background:#53fc191a;border:2px solid #53fc19;border-radius:12px;padding:16px;display:flex;align-items:center;justify-content:space-between;min-height:80px;max-width:450px;width:100%;box-sizing:border-box;position:relative}.player-slot[_ngcontent-%COMP%]{flex:1;text-align:center;padding:12px 8px;min-width:120px;max-width:180px}.player-name[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:700;color:#ddd;text-shadow:0 0 4px #181a1b;word-wrap:break-word;line-height:1.3;overflow-wrap:break-word;hyphens:auto}.vs-divider[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:700;background:#53fc19;color:#181a1b;padding:12px 16px;border-radius:50%;box-shadow:0 0 8px #53fc19;min-width:50px;text-align:center}.matchup-info[_ngcontent-%COMP%]{position:absolute;top:-8px;right:-8px;display:flex;align-items:center;justify-content:center}.new-matchup[_ngcontent-%COMP%]{background:#ff6b35;color:#fff;padding:4px 8px;border-radius:12px;font-size:.7rem;font-weight:700;box-shadow:0 0 8px #ff6b3580;animation:_ngcontent-%COMP%_pulse 2s infinite}.repeat-matchup[_ngcontent-%COMP%]{background:gold;color:#181a1b;padding:4px 8px;border-radius:12px;font-size:.7rem;font-weight:700;box-shadow:0 0 8px #ffd70080}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.1);opacity:.7}to{transform:scale(1);opacity:1}}.matchup-week[_ngcontent-%COMP%]{margin-bottom:18px}.matchup-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}.matchup[_ngcontent-%COMP%]{font-size:1rem;color:#fff;background:#53fc1914;border-radius:6px;padding:4px 10px;margin-bottom:4px;display:inline-block;box-shadow:0 0 6px #53fc19}.vs[_ngcontent-%COMP%]{color:#ddd;font-weight:700;margin:0 6px;text-shadow:0 0 4px #181a1b}.week-controls[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:16px;margin-top:32px;padding-top:24px;border-top:2px solid rgba(83,252,25,.3)}.week-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#53fc19;color:#181a1b;border:none;border-radius:8px;padding:12px 24px;font-size:1.1rem;font-weight:700;cursor:pointer;transition:all .2s ease;box-shadow:0 0 8px #53fc1980}.week-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#fff;color:#ddd;transform:translateY(-2px);box-shadow:0 4px 16px #53fc19b3}@media (max-width: 900px){.wheel-flex[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.matchups-panel[_ngcontent-%COMP%]{max-width:98vw}.wheel-container[_ngcontent-%COMP%]{width:98vw;height:98vw;max-width:400px;max-height:400px}}.stats-modal-backdrop[_ngcontent-%COMP%]{position:fixed;inset:0;background:#181a1bd9;z-index:1000;display:flex;align-items:center;justify-content:center;animation:fadeIn .2s}.stats-modal[_ngcontent-%COMP%]{background:#181a1b;border:2px solid #53fc19;border-radius:16px;box-shadow:0 0 32px #53fc19,0 0 32px #181a1b inset;padding:32px 28px 24px;min-width:320px;max-width:calc(100vw - 40px);overflow:hidden;max-height:90vh;color:#fff;position:relative;animation:_ngcontent-%COMP%_popIn .3s;display:flex;flex-direction:column}.stats-modal-content[_ngcontent-%COMP%]{flex:1 1 auto;overflow-y:auto;overflow-x:hidden;max-height:70vh;width:100%}.stats-modal-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ddd;margin-top:0;margin-bottom:12px;text-align:center;position:sticky;top:0;background:#181a1b;z-index:2}.stats-pre[_ngcontent-%COMP%]{background:none;color:#fff;font-size:1.05rem;white-space:pre-wrap;overflow-wrap:anywhere;word-break:break-word;hyphens:auto;margin:0;text-align:left;font-family:Fira Mono,Consolas,monospace;line-height:1.4}.close-modal[_ngcontent-%COMP%]{position:absolute;top:10px;right:16px;background:#181a1b;border:2px solid #53fc19;color:#ddd;font-size:2.2rem;font-weight:700;border-radius:50%;width:44px;height:44px;cursor:pointer;transition:color .2s,background .2s;z-index:10;display:flex;align-items:center;justify-content:center}.close-modal[_ngcontent-%COMP%]:hover{color:#fff;background:#53fc19}@media (max-width: 600px){.stats-modal-backdrop[_ngcontent-%COMP%]{align-items:flex-end;justify-content:center;padding:0}.stats-modal[_ngcontent-%COMP%]{width:100vw!important;height:100vh!important;min-width:unset!important;max-width:100vw!important;max-height:100vh!important;border-radius:0!important;padding:18px!important;box-sizing:border-box;justify-content:flex-start}.stats-modal-content[_ngcontent-%COMP%]{max-height:calc(100vh - 120px)!important;overflow-y:auto!important}.stats-pre[_ngcontent-%COMP%]{font-size:.95rem!important;line-height:1.35!important}.close-modal[_ngcontent-%COMP%]{top:12px!important;right:12px!important;width:52px!important;height:52px!important;font-size:2rem!important}.wheel-btn[_ngcontent-%COMP%]{width:100%!important;box-sizing:border-box!important;padding-left:12px!important;padding-right:12px!important}}"],changeDetection:0})}return l})()}}]);